(this["webpackJsonpminecraft-react"]=this["webpackJsonpminecraft-react"]||[]).push([[0],{38:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(29),o=a.n(c),l=(a(38),a(7)),i=a(41),u=a(45),m=a(43),s=function(e){return n.a.createElement(n.a.Fragment,null,e.day.current?n.a.createElement(n.a.Fragment,null,n.a.createElement(u.a,{distance:45e4,sunPosition:[1,1,0],inclination:0,azimuth:.25}),n.a.createElement("directionalLight",{position:[0,10,20],intensity:1,"shadow-camera-left":-20,"shadow-camera-bottom":-20,"shadow-camera-right":20,"shadow-camera-top":20,"shadow-camera-near":.1,"shadow-camera-far":1500,color:"white",castShadow:!0}),n.a.createElement("hemisphereLight",{skyColor:"black",groundColor:16777215,intensity:1,position:[0,50,0]})):n.a.createElement(n.a.Fragment,null,n.a.createElement(m.a,{radius:100,depth:50,count:5e3,factor:4,saturation:0,fade:!0}),n.a.createElement("hemisphereLight",{skyColor:"black",groundColor:16777215,intensity:.03,position:[0,50,0]})))},d=a(12),p=a(5),f=a(1),h=Object(r.forwardRef)((function(e,t){var a=e.STATS,n=e.api,c=e.C,o=c.forward,i=c.backward,u=c.left,m=c.right,s=c.jump,d=c.run,p=(c.crouch,Object(r.useRef)([0,0,0])),h=Object(r.useRef)([0,0,0]),g=Object(r.useRef)(),b=new f.Vector3,y=new f.Vector3,E=new f.Vector3,w=new f.Euler,v=function(){y.set(0,0,i-o),E.set(u-m,0,0),w.set(0,0,0);var t=a.speed;u||m?t=a.pan_speed():d&&(t=a.run_speed()),b.subVectors(y,E).normalize().multiplyScalar(t).applyEuler(e.camera.rotation),p.current[0]-=p.current[0]/a.inertia,p.current[2]-=p.current[2]/a.inertia;var r=[p.current[0]+b.x/a.inertia,p.current[1],p.current[2]+b.z/a.inertia];h.current[1]<1&&(n.velocity.set(r[0],r[1],r[2]),s||(g.current=!1),s&&!g.current&&(g.current=!0,n.velocity.set(r[0],a.jump_height(),r[2])))};return Object(r.useEffect)((function(){n.velocity.subscribe((function(e){return p.current=e})),n.position.subscribe((function(e){return h.current=e}))}),[]),Object(l.d)((function(){v()})),null})),g=a(44),b=Object(r.forwardRef)((function(e,t){return Object(l.d)((function(){!function(){var a=t.current.position;e.camera.position.y=a.y+e.STATS.player_height,e.camera.position.x=a.x,e.camera.position.z=a.z}()})),n.a.createElement(g.a,null)})),y=a(6),E=Object(r.forwardRef)((function(e,t){var a=Object(r.useMemo)((function(){return new f.SpotLight("#f6d980")}),[]),c=Object(r.useRef)(!0),o=Object(r.useRef)(!0),i=e.C.toggle_light;return a.angle=.4,a.intensity=o.current?2:0,a.castShadow=!0,Object(l.d)((function(){i||(c.current=!0),i&&c.current&&(c.current=!1,o.current=!o.current),function(){var r=t.current.position;a.position.y=r.y+e.STATS.player_height,a.position.x=r.x,a.position.z=r.z}(),function(){var t=new f.Vector3;e.camera.getWorldDirection(t),t.multiplyScalar(2),t.add(e.camera.position),a.target.position.set(t.x,t.y,t.z),a.target.setRotationFromQuaternion(e.camera.quaternion)}()})),n.a.createElement(n.a.Fragment,null,n.a.createElement("primitive",{object:a,penumbra:!0}),n.a.createElement("primitive",{object:a.target,position:[0,2,0]}))}));function w(e){var t={speed:5,player_height:2.5,run_speed:function(){return 2*t.speed},pan_speed:function(){return.6*t.speed},jump_height:function(){return 3*t.player_height},inertia:5},a=Object(i.e)((function(){return Object(d.a)({mass:1,type:"Dynamic",position:[0,t.player_height,0],size:[1,32,32]},e)})),c=Object(p.a)(a,2),o=c[0],u=c[1],m=Object(l.f)().camera,s=function(){var e=Object(r.useState)({forward:!1,backward:!1,left:!1,right:!1,jump:!1,run:!1,crouch:!1,toggle_light:!1}),t=Object(p.a)(e,2),a=t[0],n=t[1],c={KeyW:"forward",KeyS:"backward",KeyA:"left",KeyD:"right",Space:"jump",ShiftLeft:"run",KeyC:"crouch",KeyF:"toggle_light"},o=function(e){return c[e]};return Object(r.useEffect)((function(){var e=function(e){return n((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(y.a)({},o(e.code),!0))}))},t=function(e){return n((function(t){return Object(d.a)(Object(d.a)({},t),{},Object(y.a)({},o(e.code),!1))}))};return document.addEventListener("keydown",e),document.addEventListener("keyup",t),function(){document.removeEventListener("keydown",e),document.removeEventListener("keyup",t)}}),[]),a}(),f=s.forward,g=s.backward,w=s.left,v=s.right,j=s.jump,_=s.run,S=s.crouch,O=s.toggle_light;return n.a.createElement("group",null,n.a.createElement(b,{ref:o,STATS:t,camera:m,c:{crouch:S}}),n.a.createElement(E,{ref:o,STATS:t,camera:m,C:{toggle_light:O}}),n.a.createElement(h,{ref:o,api:u,STATS:t,camera:m,C:{forward:f,backward:g,left:w,right:v,jump:j,run:_,crouch:S}}))}var v=a(33),j=a.n(v);function _(e){var t=e.showPanel,a=void 0===t?0:t,n=e.className,c=e.parent,o=Object(r.useState)((function(){return new j.a})),i=Object(p.a)(o,1)[0];return Object(r.useEffect)((function(){var e=c&&c.current||document.body;i.showPanel(a),e.appendChild(i.dom),n&&i.dom.classList.add(n);var t=Object(l.c)((function(){return i.begin()})),r=Object(l.b)((function(){return i.end()}));return function(){e.removeChild(i.dom),t(),r()}}),[c]),null}var S=a.p+"static/media/dirt.c82951bd.png",O=function(e){var t=1e4,a=1e4,r=Object(i.f)((function(){return{position:[0,0,0],rotation:[-Math.PI/2,0,0],args:[t,a,32,32]}})),c=Object(p.a)(r,1)[0],o=Object(l.e)(f.TextureLoader,S);return o.wrapS=o.wrapT=f.RepeatWrapping,o.repeat.set(2500,2500),n.a.createElement("mesh",{ref:c,receiveShadow:!0},n.a.createElement("planeBufferGeometry",{attach:"geometry",args:[t,a,32,32]}),n.a.createElement("meshStandardMaterial",{attach:"material",map:o}))},M=a(13);function k(e){var t=Object(r.useRef)(!1),a=Object(i.c)((function(){return Object(d.a)({mass:0,args:[1.5,20,1.5]},e)})),c=Object(p.a)(a,1)[0],o=Object(M.a)("/models/trees/tree03/scene.gltf"),l=o.nodes,u=o.materials;return n.a.createElement("mesh",{ref:c,scale:e.scale,dispose:null},t.current?n.a.createElement(n.a.Fragment,null,n.a.createElement("boxBufferGeometry",{attach:"geometry",args:[1.5/e.scale[0],20/e.scale[1],1.5/e.scale[2]]}),n.a.createElement("meshLambertMaterial",{color:"red",opacity:.7,transparent:!0})):null,n.a.createElement(r.Suspense,{fallback:null},n.a.createElement("group",{dispose:null},n.a.createElement("group",{rotation:[-Math.PI/2,0,0]},n.a.createElement("group",{rotation:[Math.PI/2,0,0]},n.a.createElement("mesh",{castShadow:!0,receiveShadow:!0,material:u.Mat_pine_tree_bark_lambert3,geometry:l.tree_Mat_pine_tree_bark_lambert3_0.geometry}),e.dead?null:n.a.createElement("mesh",{material:u.Mat_pine_tree_branch_lambert2,geometry:l.group47_Mat_pine_tree_branch_lambert2_0.geometry}))))))}function C(){return function(e,t,a,r,c,o){for(var l=Math.floor(e/2),i=[],u=1;u<e-1;u++){i[u]=[];for(var m=1;m<e-1;m++){var s=u-l,d=m-l;if(1*Math.round(Math.random())&&(s>t/2||s<t/-2)||d>t/2||d<t/-2){var p=Math.random()*r+a,f=Math.random()*o+c,h=Math.round(15*Math.random()+1)<3;i[u][m]={active:1,scale:[f,f,f],position:[s*p,0,d*p],dead:h}}else i[u][m]={}}}for(var g=[],b=1;b<e-1;b++)for(var y=1;y<e-1;y++)i[b][y].active&&g.push(n.a.createElement(n.a.Fragment,null,n.a.createElement(k,{key:"".concat(b).concat(y),position:i[b][y].position,scale:i[b][y].scale,dead:i[b][y].dead})));return g}(15,1,10,15,.01,.05)}function T(e){var t=Object(r.useRef)(!1),a=Object(i.c)((function(){return Object(d.a)({mass:0,args:[12,10,1]},e)})),c=Object(p.a)(a,1)[0],o=Object(M.a)("/models/objects/fence01/scene.gltf"),l=o.nodes,u=o.materials;return n.a.createElement("mesh",{ref:c,scale:e.scale,dispose:null},t.current?n.a.createElement(n.a.Fragment,null,n.a.createElement("boxBufferGeometry",{attach:"geometry",args:[12/e.scale[0],10/e.scale[1],1/e.scale[2]]}),n.a.createElement("meshLambertMaterial",{color:"red",opacity:.7,transparent:!0})):null,n.a.createElement(r.Suspense,{fallback:null},n.a.createElement("group",{rotation:[-Math.PI/2,0,0]},n.a.createElement("group",{rotation:[Math.PI/2,0,0]},n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder10_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder11_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder6_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder15_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder12_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder13_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder8_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder9_lambert1_0.geometry}),n.a.createElement("mesh",{receiveShadow:!0,castShadow:!0,material:u.lambert1,geometry:l.pCylinder5_lambert1_0.geometry})))))}M.a.preload("/models/trees/tree03/scene.gltf"),M.a.preload("/models/grass/grass02/scene.gltf"),M.a.preload("/models/objects/fence01/scene.gltf");var L=function(e,t,a,r){for(var c=[],o=0;o<r;o++){var l=e?a/2:a,i=e?a/2+a*o:a*o,u=void 0;e&&(u=l,l=i,i=u),c.push(n.a.createElement(T,{scale:[.5,.5,.5],position:[t[0]+l,t[1],t[2]+i],rotation:[0,e?0:Math.PI/2,0]}))}return c};function R(){var e=10,t=-60;return n.a.createElement("group",null,n.a.createElement("group",null,L(!0,[t,0,-72],12,e)),n.a.createElement("group",null,L(!1,[-72,0,t],12,e)),n.a.createElement("group",null,L(!0,[t,0,48],12,e)),n.a.createElement("group",null,L(!1,[48,0,t],12,e)))}a.p;function x(){return n.a.createElement("group",null,n.a.createElement(C,null),n.a.createElement(R,null),n.a.createElement(O,null))}function z(){console.warn=function(){};var e=Object(r.useRef)(!1);return n.a.createElement(l.a,{shadowMap:!0,gl:{alpha:!1},camera:{fov:60}},n.a.createElement(s,{day:e}),e.current?null:n.a.createElement("fog",{attach:"fog",args:["black",10,100]}),n.a.createElement(_,null),n.a.createElement(i.a,{gravity:[0,-10,0]},n.a.createElement(w,null),n.a.createElement(x,null)))}o.a.render(n.a.createElement(z,null),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.2eef2864.chunk.js.map